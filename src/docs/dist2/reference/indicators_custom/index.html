<!DOCTYPE html><html lang="en" dir="ltr" data-has-toc data-has-sidebar class="astro-bguv2lll"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Custom Indicators | TradeX Chart</title><link rel="canonical" href="https://tradex-app.github.io/TradeX-chart/reference/indicators_custom/"/><link rel="sitemap" href="/TradeX-chart/sitemap-index.xml"/><link rel="shortcut icon" href="/TradeX-chart/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v3.3.0"/><meta name="generator" content="Starlight v0.11.1"/><meta property="og:title" content="Custom Indicators"/><meta property="og:type" content="article"/><meta property="og:url" content="https://tradex-app.github.io/TradeX-chart/reference/indicators_custom/"/><meta property="og:locale" content="en"/><meta property="og:description" content="Defining, registering and working with custom indicators"/><meta property="og:site_name" content="TradeX Chart"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Custom Indicators"/><meta name="twitter:description" content="Defining, registering and working with custom indicators"/><meta name="description" content="Defining, registering and working with custom indicators"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg><svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg><svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg></template><link rel="stylesheet" href="/TradeX-chart/astro/index.88731c60.css" />
<style>svg:where(.astro-c6vsoqas){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}
</style><script type="module" src="/TradeX-chart/astro/hoisted.5a2d23d0.js"></script></head><body class="astro-bguv2lll"><a href="#_top" class="astro-7q3lir66">Skip to content</a><div class="page sl-flex astro-vrdttmbt"><header class="header astro-vrdttmbt"><div class="header sl-flex astro-kmkmnagf"><div class="sl-flex astro-kmkmnagf"><a href="/TradeX-chart/" class="site-title sl-flex astro-m46x6ez3"><img class="astro-m46x6ez3" alt="" src="/TradeX-chart/astro/tx.82979636.svg" width="48" height="48"><span class="astro-m46x6ez3">TradeX Chart</span></a></div><div class="sl-flex astro-kmkmnagf"><site-search data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}" class="astro-v37mnknz"><button data-open-modal disabled class="astro-v37mnknz"><svg aria-label="Search" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg><span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">Search</span><svg aria-label="(Press / to Search)" class="sl-hidden md:sl-block astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 2H7a5 5 0 0 0-5 5v10a5 5 0 0 0 5 5h10a5 5 0 0 0 5-5V7a5 5 0 0 0-5-5Zm3 15a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v10Z"/><path d="M15.293 6.707a1 1 0 1 1 1.414 1.414l-8.485 8.486a1 1 0 0 1-1.414-1.415l8.485-8.485Z"/></svg></button><dialog style="padding:0" aria-label="Search" class="astro-v37mnknz"><div class="dialog-frame sl-flex astro-v37mnknz"><button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz">Cancel</button><div class="search-container astro-v37mnknz"><div id="starlight__search" class="astro-v37mnknz"></div></div></div></dialog></site-search></div><div class="sl-hidden md:sl-flex right-group astro-kmkmnagf"><div class="sl-flex social-icons astro-kmkmnagf"><a href="https://github.com/tradex-app/TradeX-chart" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a><a href="https://discord.gg/hhfvuhJJY" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">Discord</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M20.32 4.37a19.8 19.8 0 0 0-4.93-1.51 13.78 13.78 0 0 0-.64 1.28 18.27 18.27 0 0 0-5.5 0 12.64 12.64 0 0 0-.64-1.28h-.05A19.74 19.74 0 0 0 3.64 4.4 20.26 20.26 0 0 0 .11 18.09l.02.02a19.9 19.9 0 0 0 6.04 3.03l.04-.02a14.24 14.24 0 0 0 1.23-2.03.08.08 0 0 0-.05-.07 13.1 13.1 0 0 1-1.9-.92.08.08 0 0 1 .02-.1 10.2 10.2 0 0 0 .41-.31h.04a14.2 14.2 0 0 0 12.1 0l.04.01a9.63 9.63 0 0 0 .4.32.08.08 0 0 1-.03.1 12.29 12.29 0 0 1-1.9.91.08.08 0 0 0-.02.1 15.97 15.97 0 0 0 1.27 2.01h.04a19.84 19.84 0 0 0 6.03-3.05v-.03a20.12 20.12 0 0 0-3.57-13.69ZM8.02 15.33c-1.18 0-2.16-1.08-2.16-2.42 0-1.33.96-2.42 2.16-2.42 1.21 0 2.18 1.1 2.16 2.42 0 1.34-.96 2.42-2.16 2.42Zm7.97 0c-1.18 0-2.15-1.08-2.15-2.42 0-1.33.95-2.42 2.15-2.42 1.22 0 2.18 1.1 2.16 2.42 0 1.34-.94 2.42-2.16 2.42Z"/></svg></a></div><starlight-theme-select><label style="--sl-select-width: 6.25em" class="astro-4yphtoen"><span class="sr-only astro-4yphtoen">Select theme</span><svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg><select value="auto" class="astro-4yphtoen"><option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected="true" class="astro-4yphtoen">Auto</option></select><svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg></label></starlight-theme-select><script>
	StarlightThemeProvider.updatePickers();
</script></div></div></header><nav class="sidebar astro-vrdttmbt" aria-label="Main"><starlight-menu-button class="astro-jif73yzw"><button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"><svg aria-hidden="true" class="astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg></button></starlight-menu-button><div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"><div class="sidebar-content sl-flex astro-vrdttmbt"><ul class="top-level astro-3ii7xxms"><li class="astro-3ii7xxms"><details open class="astro-3ii7xxms"><summary class="astro-3ii7xxms"><span class="large astro-3ii7xxms">Examples</span><svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></summary><ul class="astro-3ii7xxms"><li class="astro-3ii7xxms"><a href="/TradeX-chart/examples/01_static_chart/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Static Price History</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/examples/02_live_history_chart/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Pice History with Live Price Feed</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/examples/custom_indicator/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Custom Indicator</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/examples/static_chart/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Static Price History</span></a></li></ul></details></li><li class="astro-3ii7xxms"><details open class="astro-3ii7xxms"><summary class="astro-3ii7xxms"><span class="large astro-3ii7xxms">Guides</span><svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></summary><ul class="astro-3ii7xxms"><li class="astro-3ii7xxms"><a href="/TradeX-chart/guides/custom_indicator/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Custom Indicator - How to Build and Use</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/guides/howto/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">How To</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/guides/test/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Test</span></a></li></ul></details></li><li class="astro-3ii7xxms"><details open class="astro-3ii7xxms"><summary class="astro-3ii7xxms"><span class="large astro-3ii7xxms">Reference</span><svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></summary><ul class="astro-3ii7xxms"><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Introduction</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/01_getting_started/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Getting Started</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/02_configuration/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Configuration</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/annotations/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Annotations</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/api-examples/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">API Examples</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/architecture/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Architecture</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/canvas_extension_layers/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Canvas Extension Layers</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/canvas_methods/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Canvas Methods</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/events/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Events</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/example/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Example Reference</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/hit_detection/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Hit Detection</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/indicators/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Indicators</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/indicators_custom/" aria-current="page" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Custom Indicators</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/indicators_default/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Default Indicators</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/indicators_talib/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">TA-Lib Functions</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/legends/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Legends</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/overlays/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Overlays</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/overlays_custom/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Custom Overlays</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/overlays_news_events/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Overlay News Events</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/overlays_trades/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Overlay Trades</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/range/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Range</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/state/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">State</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/state_machine/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">State Machine</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/streaming_price_data/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Streaming Price Data to the Chart</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/themes/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Themes</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/web_workers/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Web Workers</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/reference/widgets/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">Widgets</span></a></li></ul></details></li><li class="astro-3ii7xxms"><details open class="astro-3ii7xxms"><summary class="astro-3ii7xxms"><span class="large astro-3ii7xxms">API</span><svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></summary><ul class="astro-3ii7xxms"><li class="astro-3ii7xxms"><a href="/TradeX-chart/api/core/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">core</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/api/core-old/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">core - documentation.js</span></a></li><li class="astro-3ii7xxms"><a href="/TradeX-chart/api/core2/" class="astro-3ii7xxms"><span class="astro-3ii7xxms">core</span></a></li></ul></details></li></ul><div class="md:sl-hidden"><div class="mobile-preferences sl-flex astro-wu23bvmt"><starlight-theme-select><label style="--sl-select-width: 6.25em" class="astro-4yphtoen"><span class="sr-only astro-4yphtoen">Select theme</span><svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg><select value="auto" class="astro-4yphtoen"><option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected="true" class="astro-4yphtoen">Auto</option></select><svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg></label></starlight-theme-select><script>
	StarlightThemeProvider.updatePickers();
</script></div></div></div></div></nav><div class="main-frame astro-vrdttmbt"><div class="lg:sl-flex astro-67yu43on"><aside class="right-sidebar-container astro-67yu43on"><div class="right-sidebar astro-67yu43on"><div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="4" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><div class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></div><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"><li class="astro-g2bywc46" style="--depth: 0;"><a href="#_top" class="astro-g2bywc46" style="--depth: 0;"><span class="astro-g2bywc46" style="--depth: 0;">Overview</span></a><ul class="isMobile astro-g2bywc46" style="--depth: 1;"><li class="astro-g2bywc46" style="--depth: 1;"><a href="#registering-custom-indicators" class="astro-g2bywc46" style="--depth: 1;"><span class="astro-g2bywc46" style="--depth: 1;">Registering Custom Indicators</span></a></li><li class="astro-g2bywc46" style="--depth: 1;"><a href="#indicator-definitions" class="astro-g2bywc46" style="--depth: 1;"><span class="astro-g2bywc46" style="--depth: 1;">Indicator Definitions</span></a><ul class="isMobile astro-g2bywc46" style="--depth: 2;"><li class="astro-g2bywc46" style="--depth: 2;"><a href="#local-y-axis-range" class="astro-g2bywc46" style="--depth: 2;"><span class="astro-g2bywc46" style="--depth: 2;">Local Y-Axis Range</span></a></li><li class="astro-g2bywc46" style="--depth: 2;"><a href="#legend" class="astro-g2bywc46" style="--depth: 2;"><span class="astro-g2bywc46" style="--depth: 2;">Legend</span></a></li><li class="astro-g2bywc46" style="--depth: 2;"><a href="#canvas-drawing-methods" class="astro-g2bywc46" style="--depth: 2;"><span class="astro-g2bywc46" style="--depth: 2;">Canvas Drawing Methods</span></a></li><li class="astro-g2bywc46" style="--depth: 2;"><a href="#custom-indicator-example" class="astro-g2bywc46" style="--depth: 2;"><span class="astro-g2bywc46" style="--depth: 2;">Custom Indicator Example</span></a></li></ul></li></ul></li><li class="astro-g2bywc46" style="--depth: 0;"><a href="#settings" class="astro-g2bywc46" style="--depth: 0;"><span class="astro-g2bywc46" style="--depth: 0;">Settings</span></a><ul class="isMobile astro-g2bywc46" style="--depth: 1;"><li class="astro-g2bywc46" style="--depth: 1;"><a href="#invokeing-the-settings-dialogue" class="astro-g2bywc46" style="--depth: 1;"><span class="astro-g2bywc46" style="--depth: 1;">Invokeing the Settings Dialogue</span></a></li></ul></li><li class="astro-g2bywc46" style="--depth: 0;"><a href="#how-the-indicator-updates" class="astro-g2bywc46" style="--depth: 0;"><span class="astro-g2bywc46" style="--depth: 0;">How the Indicator Updates</span></a></li><li class="astro-g2bywc46" style="--depth: 0;"><a href="#indicator-calculation" class="astro-g2bywc46" style="--depth: 0;"><span class="astro-g2bywc46" style="--depth: 0;">Indicator Calculation</span></a></li></ul></div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="4"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"><li class="astro-g2bywc46" style="--depth: 0;"><a href="#_top" class="astro-g2bywc46" style="--depth: 0;"><span class="astro-g2bywc46" style="--depth: 0;">Overview</span></a><ul class="astro-g2bywc46" style="--depth: 1;"><li class="astro-g2bywc46" style="--depth: 1;"><a href="#registering-custom-indicators" class="astro-g2bywc46" style="--depth: 1;"><span class="astro-g2bywc46" style="--depth: 1;">Registering Custom Indicators</span></a></li><li class="astro-g2bywc46" style="--depth: 1;"><a href="#indicator-definitions" class="astro-g2bywc46" style="--depth: 1;"><span class="astro-g2bywc46" style="--depth: 1;">Indicator Definitions</span></a><ul class="astro-g2bywc46" style="--depth: 2;"><li class="astro-g2bywc46" style="--depth: 2;"><a href="#local-y-axis-range" class="astro-g2bywc46" style="--depth: 2;"><span class="astro-g2bywc46" style="--depth: 2;">Local Y-Axis Range</span></a></li><li class="astro-g2bywc46" style="--depth: 2;"><a href="#legend" class="astro-g2bywc46" style="--depth: 2;"><span class="astro-g2bywc46" style="--depth: 2;">Legend</span></a></li><li class="astro-g2bywc46" style="--depth: 2;"><a href="#canvas-drawing-methods" class="astro-g2bywc46" style="--depth: 2;"><span class="astro-g2bywc46" style="--depth: 2;">Canvas Drawing Methods</span></a></li><li class="astro-g2bywc46" style="--depth: 2;"><a href="#custom-indicator-example" class="astro-g2bywc46" style="--depth: 2;"><span class="astro-g2bywc46" style="--depth: 2;">Custom Indicator Example</span></a></li></ul></li></ul></li><li class="astro-g2bywc46" style="--depth: 0;"><a href="#settings" class="astro-g2bywc46" style="--depth: 0;"><span class="astro-g2bywc46" style="--depth: 0;">Settings</span></a><ul class="astro-g2bywc46" style="--depth: 1;"><li class="astro-g2bywc46" style="--depth: 1;"><a href="#invokeing-the-settings-dialogue" class="astro-g2bywc46" style="--depth: 1;"><span class="astro-g2bywc46" style="--depth: 1;">Invokeing the Settings Dialogue</span></a></li></ul></li><li class="astro-g2bywc46" style="--depth: 0;"><a href="#how-the-indicator-updates" class="astro-g2bywc46" style="--depth: 0;"><span class="astro-g2bywc46" style="--depth: 0;">How the Indicator Updates</span></a></li><li class="astro-g2bywc46" style="--depth: 0;"><a href="#indicator-calculation" class="astro-g2bywc46" style="--depth: 0;"><span class="astro-g2bywc46" style="--depth: 0;">Indicator Calculation</span></a></li></ul></nav></starlight-toc></div></div></div></aside><div class="main-pane astro-67yu43on"><main data-pagefind-body lang="en" dir="ltr" class="astro-bguv2lll"><div class="content-panel astro-7nkwcw3z"><div class="sl-container astro-7nkwcw3z"><h1 id="_top" class="astro-j6tvhyss">Custom Indicators</h1></div></div><div class="content-panel astro-7nkwcw3z"><div class="sl-container astro-7nkwcw3z"><div class="content astro-ml6ntd6l"><p>Developers are not restricted to using only the <a href="../indicators_default">default indicators</a> provided by TradeX-chart. After all, everybody has their own secret methods for finding signals in the market.</p>
<aside aria-label="Note" class="starlight-aside starlight-aside--note"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z"></path></svg>Note</p><section class="starlight-aside__content"><p>Please first read the <a href="../indicators">Indicators</a> documentation before proceeding with custom indicators, as the later extends the former and inherits the bulk of it’s properties, methods and functionality from it.</p></section></aside>
<p>If you examine the repo for the <code dir="auto">Indicator</code> class <code dir="auto">./src/components/overlays/indicator.js</code> you will note that the Indicator class itself <strong>extends</strong> the <code dir="auto">Overlay</code> class <code dir="auto">./src/components/overlays/overlay.js</code> which provides all of the methods for it to be rendered to the chart pane in the render loop. It also provides the canvas for your indicator to draw on.</p>
<aside aria-label="Note" class="starlight-aside starlight-aside--note"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z"></path></svg>Note</p><section class="starlight-aside__content"><p>Please refer to the <a href="../overlays">Overlays</a> documentation to learn what methods and properties that each indicator inherits.</p></section></aside>
<h3 id="registering-custom-indicators">Registering Custom Indicators</h3>
<p>Before any custom indicator can be used, it first must be registered with the chart.</p>
<p>During the registration of custom indicators, there is the option to expunge all of the default indicators, thereby allowing the developer to replace them all, or select which to keep.</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#6B737C">// custom indicator class</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#B392F0"> TEST </span><span style="color:#F97583">from</span><span style="color:#FFAB70"> "testIndicator"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">/**</span></span>
<span class="line"><span style="color:#6B737C"> * set indicators</span></span>
<span class="line"><span style="color:#6B737C"> * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> i - indicators {id, name, event, ind}</span></span>
<span class="line"><span style="color:#6B737C"> * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {boolean}</span><span style="color:#6B737C"> flush - expunge default indicators</span></span>
<span class="line"><span style="color:#6B737C"> * </span><span style="color:#F97583">@returns</span><span style="color:#6B737C"> boolean</span></span>
<span class="line"><span style="color:#6B737C"> */</span></span>
<span class="line"><span style="color:#79B8FF">chart</span><span style="color:#B392F0">.setIndicators({</span></span>
<span class="line"><span style="color:#B392F0">  TEST</span><span style="color:#F97583">:</span><span style="color:#B392F0"> {id</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "TEST"</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> name</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "Custom Indicator"</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> event</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "addIndicator"</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> ind</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> TEST</span><span style="color:#B392F0">}</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> false</span></span>
<span class="line"><span style="color:#B392F0">})</span></span></code></pre>
<p>The list of registered indicators, both default and custom can be accessed via the chart API.</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#6B737C">// returns a Map() iterator of indicators</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> primaryPaneIndicators</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> chart</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">Indicators</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">primary</span><span style="color:#B392F0">.entries()</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> secondaryPaneIndicators</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> chart</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">Indicators</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">secondary</span><span style="color:#B392F0">.entries()</span></span></code></pre>
<h3 id="indicator-definitions">Indicator Definitions</h3>
<h4 id="local-y-axis-range">Local Y-Axis Range</h4>
<p>If the indicator is not overlaid on the Primary Chart Pane, and instead on a Secondary Chart Pane, there is the option to set the local Y-Axis range, min and max values which will be used for the scale and plotting the indicator.</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">chart</span><span style="color:#B392F0">.setLocalRange(</span><span style="color:#F8F8F8">0</span><span style="color:#BBBBBB">,</span><span style="color:#F8F8F8"> 150</span><span style="color:#B392F0">)</span></span></code></pre>
<h4 id="legend">Legend</h4>
<p>Each <a href="../legends">indicator</a> has a legend to display it’s information. The legend also provides a simple GUI of icons to modify the indicator.</p>
<p>Indicators must provide a <code dir="auto">legendInputs(pos)</code> method. The chart will pass the current mouse position to the indicator in an array, <code dir="auto">[x, y]</code>.</p>
<p>Legends can display multiple values if formatted correctly.</p>
<p>If the indicator provides no values for it’s legend then simply return false.</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#B392F0">legendInputs() {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#79B8FF"> false</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#B392F0">}</span></span></code></pre>
<p>When the indicator does provide values for it’s legend, then the <code dir="auto">legendInputs()</code> method must return an object with three entries.</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#F97583"> return</span><span style="color:#B392F0"> {inputs</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> colours</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> labels}</span></span></code></pre>
<p>where the three entries are defined as the following:</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#6B737C">/**</span></span>
<span class="line"><span style="color:#F97583">  @param</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> inputs - property names are used as labels</span></span>
<span class="line"><span style="color:#F97583">  @param</span><span style="color:#B392F0"> {Array}</span><span style="color:#6B737C"> colours - array of #rrggbb(aa) values</span></span>
<span class="line"><span style="color:#F97583">  @param</span><span style="color:#B392F0"> {Array}</span><span style="color:#6B737C"> labels - array of which input labels to dispaly [true, false, ...]</span></span>
<span class="line"><span style="color:#6B737C">*/</span></span></code></pre>
<h5 id="inputs">inputs</h5>
<p>is an object that provides the legend labels and values.
For example the Bollinger Band indicator has three values. It’s returned <code dir="auto">inputs</code> object would look like the following:</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#B392F0">{ Hi</span><span style="color:#BBBBBB">:</span><span style="color:#FFAB70"> "13016.1"</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> Mid</span><span style="color:#BBBBBB">:</span><span style="color:#FFAB70"> "13011.2"</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> Lo</span><span style="color:#BBBBBB">:</span><span style="color:#FFAB70"> "13006.2"</span><span style="color:#B392F0"> }</span></span></code></pre>
<p>The object property names are used as the labels for the indicator.
The Bollinger Band indicator legend would look like this on the chart:</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#B392F0"> Hi</span><span style="color:#BBBBBB">:</span><span style="color:#F8F8F8"> 13016.1</span><span style="color:#B392F0">  Mid</span><span style="color:#BBBBBB">:</span><span style="color:#F8F8F8"> 13011.2</span><span style="color:#B392F0">  Lo</span><span style="color:#BBBBBB">:</span><span style="color:#F8F8F8"> 13006.2</span></span></code></pre>
<p>If you wanted a label with spaces, then the object property name would have to be quoted. <code dir="auto">"some value": 12345</code></p>
<h5 id="colours">colours</h5>
<p>is an array of <code dir="auto">"#rrggbb(aa)"</code> string values corresponding to the legend values</p>
<h5 id="lables">lables</h5>
<p>is an array that specifies which of the legend labels are displayed.
In the Bollinger Band example, if you wanted to silence all labels, use an array of <code dir="auto">[false, false, false]</code>.</p>
<h4 id="canvas-drawing-methods">Canvas Drawing Methods</h4>
<p>The base <code dir="auto">Indicator</code> class which all others, including custom indicators are built atop, offers the <code dir="auto">plot()</code> method for drawing to the canvas.</p>
<p>The <code dir="auto">Indicator</code> class also exposes a pointer to the canvas directly, so you could also use your own functions instead.</p>
<p>Refer to the <a href="../canvas_mehtods">Canvas Methods documentation</a> for the available functions.</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#79B8FF">this</span><span style="color:#B392F0">.plot (plots</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> type</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> opts )</span></span></code></pre>

























<table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>plots</td><td>Array</td><td>array of x y coords [ { x, y }, …]</td></tr><tr><td>type</td><td>string</td><td><a href="../canvas_mehtods">Canvas Methods documentation</a></td></tr><tr><td>opts</td><td>object</td><td><a href="../canvas_mehtods">Canvas Methods documentation</a></td></tr></tbody></table>
<h4 id="custom-indicator-example">Custom Indicator Example</h4>
<p>The following is an example of a functioning custom <code dir="auto">RSI</code> indicator using the TALib functions. It demonstrates how to import <a href="../indicators_talib.md">TALib</a> into your indicator and call it’s functions and then draw the results.</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#6B737C">// custom-indicator.js</span></span>
<span class="line"><span style="color:#6B737C">// proof of concept for user defined indicators</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">// importing talibAPI is only required if you intend to use the talib functions provided by the chart to calculate your indicator</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#B392F0"> { Indicator</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> Range</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> talibAPI</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> uid } </span><span style="color:#F97583">from</span><span style="color:#FFAB70"> "tradex-chart"</span><span style="color:#B392F0">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">/**</span></span>
<span class="line"><span style="color:#6B737C"> * Indicator - Relative Strength Index</span></span>
<span class="line"><span style="color:#6B737C"> * </span><span style="color:#F97583">@export</span></span>
<span class="line"><span style="color:#6B737C"> * </span><span style="color:#F97583">@class</span><span style="color:#6B737C"> CustomRSI</span></span>
<span class="line"><span style="color:#6B737C"> * </span><span style="color:#F97583">@extends</span><span style="color:#B392F0"> {indicator}</span></span>
<span class="line"><span style="color:#6B737C"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> CustomRSI </span><span style="color:#F97583">extends</span><span style="color:#B392F0"> Indicator {</span></span>
<span class="line"><span style="color:#B392F0">  name </span><span style="color:#F97583">=</span><span style="color:#FFAB70"> "Relative Strength Index"</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#B392F0">  shortName </span><span style="color:#F97583">=</span><span style="color:#FFAB70"> "RSI"</span><span style="color:#B392F0">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">/* these properties are only required if using TALib */</span></span>
<span class="line"><span style="color:#B392F0">  libName </span><span style="color:#F97583">=</span><span style="color:#FFAB70"> "RSI"</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#B392F0">  definition </span><span style="color:#F97583">=</span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#B392F0">    input</span><span style="color:#F97583">:</span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#B392F0">      inReal</span><span style="color:#F97583">:</span><span style="color:#B392F0"> []</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">      timePeriod</span><span style="color:#F97583">:</span><span style="color:#F8F8F8"> 14</span><span style="color:#BBBBBB">,</span><span style="color:#6B737C"> // 5</span></span>
<span class="line"><span style="color:#B392F0">    }</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    output</span><span style="color:#F97583">:</span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#B392F0">      output</span><span style="color:#F97583">:</span><span style="color:#B392F0"> []</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    }</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">  };</span></span>
<span class="line"><span style="color:#6B737C">/* end of TALib properties */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">// default canvas drawing styles</span></span>
<span class="line"><span style="color:#6B737C">// these can and will be overwritten by any </span></span>
<span class="line"><span style="color:#6B737C">// matching values passed into constructor via </span></span>
<span class="line"><span style="color:#6B737C">// params.overlay.settings.style</span></span>
<span class="line"><span style="color:#B392F0">  #defaultStyle </span><span style="color:#F97583">=</span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#B392F0">    stroke</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "#C80"</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    width</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "1"</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    defaultHigh</span><span style="color:#F97583">:</span><span style="color:#F8F8F8"> 75</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    defaultLow</span><span style="color:#F97583">:</span><span style="color:#F8F8F8"> 25</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    highLowLineWidth</span><span style="color:#F97583">:</span><span style="color:#F8F8F8"> 1</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    highLowStyle</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "dashed"</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    highStroke</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "#848"</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    lowStroke</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "#848"</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    highLowRangeStyle</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "#22002220"</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">  };</span></span>
<span class="line"><span style="color:#B392F0">  checkParamCount </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> false</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#B392F0">  plots </span><span style="color:#F97583">=</span><span style="color:#B392F0"> [{ key</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "RSI_1"</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> title</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> " "</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> type</span><span style="color:#F97583">:</span><span style="color:#FFAB70"> "line"</span><span style="color:#B392F0"> }];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  static</span><span style="color:#B392F0"> inCnt </span><span style="color:#F97583">=</span><span style="color:#F8F8F8"> 0</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#F97583">  static</span><span style="color:#B392F0"> primaryPane </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> false</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#F97583">  static</span><span style="color:#B392F0"> scale </span><span style="color:#F97583">=</span><span style="color:#FFAB70"> "percent"</span><span style="color:#B392F0">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">  /**</span></span>
<span class="line"><span style="color:#6B737C">   * Creates an instance of RSI.</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> target - canvas scene</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> xAxis - timeline axis instance</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> yAxis - scale axis instance</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> config - theme / styling</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> parent - chart pane instance that hosts the indicator</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> params - contains minimum of overlay instance</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@memberof</span><span style="color:#B392F0"> RSI</span></span>
<span class="line"><span style="color:#6B737C">   */</span></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#B392F0">(target</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> xAxis </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> false</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> yAxis </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> false</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> config</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> parent</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> params) {</span></span>
<span class="line"><span style="color:#B392F0">    super(target</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> xAxis</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> yAxis</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> config</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> parent</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> params);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> overlay</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> params</span><span style="color:#B392F0">.overlay;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.id </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> params</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">?.id </span><span style="color:#F97583">||</span><span style="color:#B392F0"> uid(</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.shortName);</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.defineIndicator(</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">?.settings</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> talibAPI[</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.libName]);</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.style </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> overlay</span><span style="color:#B392F0">?.</span><span style="color:#79B8FF">settings</span><span style="color:#B392F0">?.style</span></span>
<span class="line"><span style="color:#F97583">      ?</span><span style="color:#B392F0"> { </span><span style="color:#F97583">...</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.#defaultStyle</span><span style="color:#BBBBBB">,</span><span style="color:#F97583"> ...</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">settings</span><span style="color:#B392F0">.style }</span></span>
<span class="line"><span style="color:#F97583">      :</span><span style="color:#B392F0"> { </span><span style="color:#F97583">...</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.#defaultStyle</span><span style="color:#BBBBBB">,</span><span style="color:#F97583"> ...</span><span style="color:#79B8FF">config</span><span style="color:#B392F0">.style };</span></span>
<span class="line"><span style="color:#6B737C">    // calculate back history if missing</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.calcIndicatorHistory();</span></span>
<span class="line"><span style="color:#6B737C">    // enable processing of price stream</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.setNewValue </span><span style="color:#F97583">=</span><span style="color:#B392F0"> (value) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#B392F0">.newValue(value);</span></span>
<span class="line"><span style="color:#B392F0">    };</span></span>
<span class="line"><span style="color:#6B737C">    // handles updates to the current streaming candle that has not yet closed</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.setUpdateValue </span><span style="color:#F97583">=</span><span style="color:#B392F0"> (value) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#B392F0">.updateValue(value);</span></span>
<span class="line"><span style="color:#B392F0">    };</span></span>
<span class="line"><span style="color:#6B737C">    // add the indicator legend to the chart pane</span></span>
<span class="line"><span style="color:#6B737C">    // this includes the indicator control icons</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.addLegend();</span></span>
<span class="line"><span style="color:#6B737C">    // set the max min Y-Axis values if required</span></span>
<span class="line"><span style="color:#6B737C">    // this.chart.setLocalRange(0, 150)</span></span>
<span class="line"><span style="color:#B392F0">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">  /** </span></span>
<span class="line"><span style="color:#6B737C">   * Where can this indicator be displayed?</span></span>
<span class="line"><span style="color:#6B737C">   * true - on the primary pane that displays the price history (candles) (eg. EMA)</span></span>
<span class="line"><span style="color:#6B737C">   * false - on secondary panes as a stand alone indicator (eg. RSI)</span></span>
<span class="line"><span style="color:#6B737C">   * "both" - on any chart pane</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@readonly</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@returns</span><span style="color:#B392F0"> {boolean|string}</span><span style="color:#6B737C"> - true, false, "both"</span></span>
<span class="line"><span style="color:#6B737C">  */</span></span>
<span class="line"><span style="color:#F97583">  get</span><span style="color:#B392F0"> primaryPane() {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#79B8FF"> RSI14</span><span style="color:#B392F0">.primaryPane;</span></span>
<span class="line"><span style="color:#B392F0">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">  /**</span></span>
<span class="line"><span style="color:#6B737C">   * return default drawing styling for indicator's canvas</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@readonly</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@returns</span><span style="color:#B392F0"> {object}</span></span>
<span class="line"><span style="color:#6B737C">   */</span></span>
<span class="line"><span style="color:#F97583">  get</span><span style="color:#B392F0"> defaultStyle() {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.#defaultStyle;</span></span>
<span class="line"><span style="color:#B392F0">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">  /**</span></span>
<span class="line"><span style="color:#6B737C">   * return inputs required to display indicator legend on chart pane</span></span>
<span class="line"><span style="color:#6B737C">   * legends can display multiple values</span></span>
<span class="line"><span style="color:#6B737C">   * https://tradex-app.github.io/TradeX-chart/reference/legends/</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Array}</span><span style="color:#6B737C"> [pos</span><span style="color:#F97583">=</span><span style="color:#6B737C">this.chart.cursorPos] - optional</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@returns</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> - {inputs, colours, labels}</span></span>
<span class="line"><span style="color:#6B737C">   */</span></span>
<span class="line"><span style="color:#B392F0">  legendInputs(pos </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">chart</span><span style="color:#B392F0">.cursorPos) {</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#B392F0"> (</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">data</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> ==</span><span style="color:#F8F8F8"> 0</span><span style="color:#B392F0">) </span><span style="color:#F97583">return</span><span style="color:#79B8FF"> false</span><span style="color:#B392F0">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // determine which legend labels to display</span></span>
<span class="line"><span style="color:#6B737C">    // let labels = [false]</span></span>
<span class="line"><span style="color:#6B737C">    // c = data index</span></span>
<span class="line"><span style="color:#6B737C">    // colours = array of colours ["#f00"]</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#B392F0"> { </span><span style="color:#79B8FF">c</span><span style="color:#BBBBBB">,</span><span style="color:#79B8FF"> colours</span><span style="color:#B392F0"> } </span><span style="color:#F97583">=</span><span style="color:#B392F0"> super.legendInputs(pos);</span></span>
<span class="line"><span style="color:#6B737C">    // value/s to display</span></span>
<span class="line"><span style="color:#6B737C">    // build an object of input keys (labels) and values</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> inputs</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#FFAB70">      "RSI 1"</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">scale</span><span style="color:#B392F0">.nicePrice(</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">.data[c][</span><span style="color:#F8F8F8">1</span><span style="color:#B392F0">])</span></span>
<span class="line"><span style="color:#B392F0">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#B392F0"> {inputs</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> colours</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> labels}</span></span>
<span class="line"><span style="color:#B392F0">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">  /**</span></span>
<span class="line"><span style="color:#6B737C">   * process new candle stream value</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Array.&#x3C;number>}</span><span style="color:#6B737C"> candle - [timestamp, open, high, low, close, volume]</span></span>
<span class="line"><span style="color:#6B737C">   */</span></span>
<span class="line"><span style="color:#B392F0">  updateValue(candle) {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.value </span><span style="color:#F97583">=</span><span style="color:#B392F0"> candle</span></span>
<span class="line"><span style="color:#B392F0">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">  /**</span></span>
<span class="line"><span style="color:#6B737C">   * calculate indicator values</span></span>
<span class="line"><span style="color:#6B737C">   * these will be passed to the draw() method</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {string}</span><span style="color:#6B737C"> - ignored for custom indicators</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {params}</span><span style="color:#6B737C"> - indicator parameters - this.definition.input</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> range - instance of Range</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@returns</span><span style="color:#B392F0"> {boolean|array}</span></span>
<span class="line"><span style="color:#6B737C">   */</span></span>
<span class="line"><span style="color:#B392F0">  calcIndicator (indicator</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> params</span><span style="color:#F97583">=</span><span style="color:#B392F0">{}</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> range</span><span style="color:#F97583">=</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.range) {</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#B392F0"> start</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> end;</span></span>
<span class="line"><span style="color:#6B737C">    // number of values to use in indicator calculation</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#B392F0"> p </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">definition</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">input</span><span style="color:#B392F0">.timePeriod</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // is it a Range instance?</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#B392F0">(range </span><span style="color:#F97583">instanceof</span><span style="color:#B392F0"> Range) {</span></span>
<span class="line"><span style="color:#6B737C">      // if not calculate entire history</span></span>
<span class="line"><span style="color:#B392F0">      start </span><span style="color:#F97583">=</span><span style="color:#F8F8F8"> 0</span></span>
<span class="line"><span style="color:#B392F0">      end </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> range</span><span style="color:#B392F0">.dataLength </span><span style="color:#F97583">-</span><span style="color:#B392F0"> p </span><span style="color:#F97583">+</span><span style="color:#F8F8F8"> 1</span></span>
<span class="line"><span style="color:#B392F0">    }</span></span>
<span class="line"><span style="color:#F97583">    else</span><span style="color:#F97583"> if</span><span style="color:#B392F0"> ( </span><span style="color:#FFAB70">"indexStart"</span><span style="color:#F97583"> in</span><span style="color:#B392F0"> range </span><span style="color:#F97583">||</span><span style="color:#FFAB70"> "indexEnd"</span><span style="color:#F97583"> in</span><span style="color:#B392F0"> range </span><span style="color:#F97583">||</span></span>
<span class="line"><span style="color:#FFAB70">              "tsStart"</span><span style="color:#F97583"> in</span><span style="color:#B392F0"> range </span><span style="color:#F97583">||</span><span style="color:#FFAB70">  "tsEnd"</span><span style="color:#F97583"> in</span><span style="color:#B392F0"> range ) {</span></span>
<span class="line"><span style="color:#B392F0">      start </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> range</span><span style="color:#B392F0">.indexStart </span><span style="color:#F97583">||</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">Timeline</span><span style="color:#B392F0">.t2Index(</span><span style="color:#79B8FF">range</span><span style="color:#B392F0">.tsStart </span><span style="color:#F97583">||</span><span style="color:#F8F8F8"> 0</span><span style="color:#B392F0">) </span><span style="color:#F97583">||</span><span style="color:#F8F8F8"> 0</span></span>
<span class="line"><span style="color:#B392F0">      end </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> range</span><span style="color:#B392F0">.indexEnd </span><span style="color:#F97583">||</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">Timeline</span><span style="color:#B392F0">.t2Index(</span><span style="color:#79B8FF">range</span><span style="color:#B392F0">.tsEnd) </span><span style="color:#F97583">||</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">range</span><span style="color:#B392F0">.Length </span><span style="color:#F97583">-</span><span style="color:#F8F8F8"> 1</span></span>
<span class="line"><span style="color:#B392F0">      end </span><span style="color:#F97583">-</span><span style="color:#B392F0"> p</span></span>
<span class="line"><span style="color:#B392F0">    }</span></span>
<span class="line"><span style="color:#F97583">    else</span><span style="color:#F97583"> return</span><span style="color:#79B8FF"> false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // if not enough data for calculation fail</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#B392F0"> ( end </span><span style="color:#F97583">-</span><span style="color:#B392F0"> start </span><span style="color:#F97583">&#x3C;</span><span style="color:#B392F0"> p ) </span><span style="color:#F97583">return</span><span style="color:#79B8FF"> false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#B392F0"> data </span><span style="color:#F97583">=</span><span style="color:#B392F0"> [];</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#B392F0"> i</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> v</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> entry</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> input;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // loop over range data and calculate the indicator data</span></span>
<span class="line"><span style="color:#F97583">    while</span><span style="color:#B392F0"> (start </span><span style="color:#F97583">&#x3C;</span><span style="color:#B392F0"> end) {</span></span>
<span class="line"><span style="color:#6B737C">      // fetch the data required to calculate the indicator</span></span>
<span class="line"><span style="color:#B392F0">      input </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.indicatorInput(start</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> start </span><span style="color:#F97583">+</span><span style="color:#B392F0"> p)</span></span>
<span class="line"><span style="color:#B392F0">      params </span><span style="color:#F97583">=</span><span style="color:#B392F0"> {</span><span style="color:#F97583">...</span><span style="color:#B392F0">params</span><span style="color:#BBBBBB">,</span><span style="color:#F97583"> ...</span><span style="color:#B392F0">input}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">/* replace this with your own indicator calculation */</span></span>
<span class="line"><span style="color:#6B737C">      // calculate the indicator data</span></span>
<span class="line"><span style="color:#B392F0">      entry </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.TALib[</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.libName](params)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">      v </span><span style="color:#F97583">=</span><span style="color:#B392F0"> []</span></span>
<span class="line"><span style="color:#B392F0">      i </span><span style="color:#F97583">=</span><span style="color:#F8F8F8"> 0</span></span>
<span class="line"><span style="color:#6B737C">      // store the return value/s in array</span></span>
<span class="line"><span style="color:#F97583">      for</span><span style="color:#B392F0"> (</span><span style="color:#F97583">let</span><span style="color:#B392F0"> o </span><span style="color:#F97583">of</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">definition</span><span style="color:#B392F0">.output) {</span></span>
<span class="line"><span style="color:#B392F0">        v[i</span><span style="color:#F97583">++</span><span style="color:#B392F0">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> entry[</span><span style="color:#79B8FF">o</span><span style="color:#B392F0">.name][</span><span style="color:#F8F8F8">0</span><span style="color:#B392F0">]</span></span>
<span class="line"><span style="color:#B392F0">      }</span></span>
<span class="line"><span style="color:#6B737C">/* value has been calculated */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">      // store entry with timestamp</span></span>
<span class="line"><span style="color:#79B8FF">      data</span><span style="color:#B392F0">.push([</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">range</span><span style="color:#B392F0">.value(start </span><span style="color:#F97583">+</span><span style="color:#B392F0"> p </span><span style="color:#F97583">-</span><span style="color:#F8F8F8"> 1</span><span style="color:#B392F0">)[</span><span style="color:#F8F8F8">0</span><span style="color:#B392F0">]</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> v])</span></span>
<span class="line"><span style="color:#B392F0">      start</span><span style="color:#F97583">++</span></span>
<span class="line"><span style="color:#B392F0">    }</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#B392F0"> data</span></span>
<span class="line"><span style="color:#B392F0">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">  /**</span></span>
<span class="line"><span style="color:#6B737C">   * calculate entire indicator history</span></span>
<span class="line"><span style="color:#6B737C">   */</span></span>
<span class="line"><span style="color:#B392F0">  calcIndicatorHistory() {</span></span>
<span class="line"><span style="color:#6B737C">    // if overlay history is missing, calculate it</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#B392F0"> (</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">data</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> &#x3C;</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">definition</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">input</span><span style="color:#B392F0">.timePeriod) {</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> data</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.calcIndicator()</span></span>
<span class="line"><span style="color:#F97583">      if</span><span style="color:#B392F0"> (data) </span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">.data </span><span style="color:#F97583">=</span><span style="color:#B392F0"> data</span></span>
<span class="line"><span style="color:#B392F0">    }</span></span>
<span class="line"><span style="color:#B392F0">  }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">  /**</span></span>
<span class="line"><span style="color:#6B737C">   * Draw the current indicator range on its canvas layer and render it.</span></span>
<span class="line"><span style="color:#6B737C">   * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {Object}</span><span style="color:#6B737C"> range</span></span>
<span class="line"><span style="color:#6B737C">   */</span></span>
<span class="line"><span style="color:#B392F0">  draw(range </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.range) {</span></span>
<span class="line"><span style="color:#6B737C">    // minimum of two candles are required for this indicator</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#B392F0"> (</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">data</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> &#x3C;</span><span style="color:#F8F8F8"> 2</span><span style="color:#B392F0">) </span><span style="color:#F97583">return</span><span style="color:#79B8FF"> false</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#6B737C">    // skip drawing if no visual update is required</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#B392F0"> (</span><span style="color:#F97583">!</span><span style="color:#B392F0">super.mustUpdate()) </span><span style="color:#F97583">return</span><span style="color:#79B8FF"> false</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#6B737C">    // clear the indicator overlay (chart layer)</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">scene</span><span style="color:#B392F0">.clear();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> x2</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">scene</span><span style="color:#B392F0">.width </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">xAxis</span><span style="color:#B392F0">.bufferPx </span><span style="color:#F97583">*</span><span style="color:#F8F8F8"> 2</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> y1</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">yAxis</span><span style="color:#B392F0">.yPos(</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">style</span><span style="color:#B392F0">.defaultHigh);</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> y2</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">yAxis</span><span style="color:#B392F0">.yPos(</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">style</span><span style="color:#B392F0">.defaultLow);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // Fill the range between high and low</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> plots</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> [</span><span style="color:#F8F8F8">0</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> y1</span><span style="color:#BBBBBB">,</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">scene</span><span style="color:#B392F0">.width</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> y2 </span><span style="color:#F97583">-</span><span style="color:#B392F0"> y1];</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#B392F0"> style </span><span style="color:#F97583">=</span><span style="color:#B392F0"> { fill</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">style</span><span style="color:#B392F0">.highLowRangeStyle };</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.plot(plots</span><span style="color:#BBBBBB">,</span><span style="color:#FFAB70"> "renderRect"</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> style);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // High RSI Range marker</span></span>
<span class="line"><span style="color:#79B8FF">    plots</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> =</span><span style="color:#F8F8F8"> 0</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#B392F0">    plots[</span><span style="color:#F8F8F8">0</span><span style="color:#B392F0">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> { x</span><span style="color:#F97583">:</span><span style="color:#F8F8F8"> 0</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> y</span><span style="color:#F97583">:</span><span style="color:#B392F0"> y1 };</span></span>
<span class="line"><span style="color:#B392F0">    plots[</span><span style="color:#F8F8F8">1</span><span style="color:#B392F0">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> { x</span><span style="color:#F97583">:</span><span style="color:#B392F0"> x2</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> y</span><span style="color:#F97583">:</span><span style="color:#B392F0"> y1 };</span></span>
<span class="line"><span style="color:#B392F0">    style </span><span style="color:#F97583">=</span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#B392F0">      width</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">style</span><span style="color:#B392F0">.highLowLineWidth</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">      stroke</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">style</span><span style="color:#B392F0">.highStroke</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">      dash</span><span style="color:#F97583">:</span><span style="color:#B392F0"> [</span><span style="color:#F8F8F8">1</span><span style="color:#BBBBBB">,</span><span style="color:#F8F8F8"> 1</span><span style="color:#B392F0">]</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    };</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.plot(plots</span><span style="color:#BBBBBB">,</span><span style="color:#FFAB70"> "renderLine"</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> style);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // Low RSI Range marker</span></span>
<span class="line"><span style="color:#79B8FF">    plots</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> =</span><span style="color:#F8F8F8"> 0</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#B392F0">    plots[</span><span style="color:#F8F8F8">0</span><span style="color:#B392F0">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> { x</span><span style="color:#F97583">:</span><span style="color:#F8F8F8"> 0</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> y</span><span style="color:#F97583">:</span><span style="color:#B392F0"> y2 };</span></span>
<span class="line"><span style="color:#B392F0">    plots[</span><span style="color:#F8F8F8">1</span><span style="color:#B392F0">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> { x</span><span style="color:#F97583">:</span><span style="color:#B392F0"> x2</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> y</span><span style="color:#F97583">:</span><span style="color:#B392F0"> y2 };</span></span>
<span class="line"><span style="color:#B392F0">    style </span><span style="color:#F97583">=</span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#B392F0">      width</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">style</span><span style="color:#B392F0">.highLowLineWidth</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">      stroke</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">style</span><span style="color:#B392F0">.lowStroke</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">      dash</span><span style="color:#F97583">:</span><span style="color:#B392F0"> [</span><span style="color:#F8F8F8">1</span><span style="color:#BBBBBB">,</span><span style="color:#F8F8F8"> 1</span><span style="color:#B392F0">]</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    };</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.plot(plots</span><span style="color:#BBBBBB">,</span><span style="color:#FFAB70"> "renderLine"</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> style);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // exit if no data to render</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#B392F0"> (</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">data</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> &#x3C;</span><span style="color:#F8F8F8"> 2</span><span style="color:#B392F0">) {</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">target</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">viewport</span><span style="color:#B392F0">.render();</span></span>
<span class="line"><span style="color:#F97583">      return</span><span style="color:#79B8FF"> false</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#B392F0">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // we have indicator data, draw something</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> data</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">.data;</span></span>
<span class="line"><span style="color:#6B737C">    // current candle width, chart zoom modifies this</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> width</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">xAxis</span><span style="color:#B392F0">.candleW;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // RSI plot</span></span>
<span class="line"><span style="color:#79B8FF">    plots</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> =</span><span style="color:#F8F8F8"> 0</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> offset</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">Timeline</span><span style="color:#B392F0">.smoothScrollOffset </span><span style="color:#F97583">||</span><span style="color:#F8F8F8"> 0</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#6B737C">    // basic plot entry</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> plot</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#B392F0">      w</span><span style="color:#F97583">:</span><span style="color:#B392F0"> width</span><span style="color:#BBBBBB">,</span></span>
<span class="line"><span style="color:#B392F0">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C">    // account for "missing" entries because of indicator calculation</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> o</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">Timeline</span><span style="color:#B392F0">.rangeScrollOffset;</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> d</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> range</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">data</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> -</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">data</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">length</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#B392F0"> c </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> range</span><span style="color:#B392F0">.indexStart </span><span style="color:#F97583">-</span><span style="color:#B392F0"> d </span><span style="color:#F97583">-</span><span style="color:#F8F8F8"> 2</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#B392F0"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> range</span><span style="color:#B392F0">.Length </span><span style="color:#F97583">+</span><span style="color:#B392F0"> o </span><span style="color:#F97583">*</span><span style="color:#F8F8F8"> 2</span><span style="color:#F97583"> +</span><span style="color:#F8F8F8"> 2</span><span style="color:#B392F0">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    while</span><span style="color:#B392F0"> (i) {</span></span>
<span class="line"><span style="color:#F97583">      if</span><span style="color:#B392F0"> (c </span><span style="color:#F97583">&#x3C;</span><span style="color:#F8F8F8"> 0</span><span style="color:#F97583"> ||</span><span style="color:#B392F0"> c </span><span style="color:#F97583">>=</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">overlay</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">data</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">length</span><span style="color:#B392F0">) {</span></span>
<span class="line"><span style="color:#6B737C">        // plots.push({x: null, y: null})</span></span>
<span class="line"><span style="color:#B392F0">      } </span><span style="color:#F97583">else</span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#79B8FF">        plot</span><span style="color:#B392F0">.x </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">xAxis</span><span style="color:#B392F0">.xPos(data[c][</span><span style="color:#F8F8F8">0</span><span style="color:#B392F0">]);</span></span>
<span class="line"><span style="color:#79B8FF">        plot</span><span style="color:#B392F0">.y </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">yAxis</span><span style="color:#B392F0">.yPos(data[c][</span><span style="color:#F8F8F8">1</span><span style="color:#B392F0">]);</span></span>
<span class="line"><span style="color:#79B8FF">        plots</span><span style="color:#B392F0">.push({ </span><span style="color:#F97583">...</span><span style="color:#B392F0">plot });</span></span>
<span class="line"><span style="color:#B392F0">      }</span></span>
<span class="line"><span style="color:#B392F0">      c</span><span style="color:#F97583">++</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#B392F0">      i</span><span style="color:#F97583">--</span><span style="color:#B392F0">;</span></span>
<span class="line"><span style="color:#B392F0">    }</span></span>
<span class="line"><span style="color:#6B737C">    // process the plots</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.plot(plots</span><span style="color:#BBBBBB">,</span><span style="color:#FFAB70"> "renderLine"</span><span style="color:#BBBBBB">,</span><span style="color:#79B8FF"> this</span><span style="color:#B392F0">.style);</span></span>
<span class="line"><span style="color:#6B737C">    // render the indicator</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">target</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">viewport</span><span style="color:#B392F0">.render();</span></span>
<span class="line"><span style="color:#6B737C">    // mark the indicator drawing as complete and ready to render</span></span>
<span class="line"><span style="color:#B392F0">    super.updated();</span></span>
<span class="line"><span style="color:#B392F0">  }</span></span>
<span class="line"><span style="color:#B392F0">}</span></span></code></pre>
<h2 id="settings">Settings</h2>
<p>Current indicator settings can be retrieved with the following call:</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#79B8FF">chart0</span><span style="color:#B392F0">.getIndicator(</span><span style="color:#FFAB70">"TX_lj7216mu_vq6_0-Chart_0-EMA_1"</span><span style="color:#B392F0">).settings()</span></span></code></pre>
<p>Indicator settings can also modified with the same call by passing an object:</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> newSettings</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> {}</span></span>
<span class="line"><span style="color:#79B8FF">chart0</span><span style="color:#B392F0">.getIndicator(</span><span style="color:#FFAB70">"TX_lj7216mu_vq6_0-Chart_0-EMA_1"</span><span style="color:#B392F0">).settings(newSettings)</span></span></code></pre>
<h3 id="invokeing-the-settings-dialogue">Invokeing the Settings Dialogue</h3>
<p>The indicator Settings Dialogue can be invoked with the following:</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#79B8FF">chart0</span><span style="color:#B392F0">.getIndicator(</span><span style="color:#FFAB70">"TX_lj7216mu_vq6_0-Chart_0-EMA_1"</span><span style="color:#B392F0">).invokeSettings()</span></span></code></pre>
<p>Invocation of the Settings Dialogue can be modified or replaced with a user defined function, either by passing an object to the method:</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> callback</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> {</span></span>
<span class="line"><span style="color:#B392F0">    indicatorSettings</span><span style="color:#F97583">:</span><span style="color:#B392F0"> {fn</span><span style="color:#F97583">:</span><span style="color:#B392F0"> (c)</span><span style="color:#F97583">=></span><span style="color:#B392F0">{ alert(</span><span style="color:#79B8FF">c</span><span style="color:#B392F0">.id) }</span><span style="color:#BBBBBB">,</span><span style="color:#B392F0"> own</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> true</span><span style="color:#B392F0">}</span></span>
<span class="line"><span style="color:#B392F0">  }</span></span>
<span class="line"><span style="color:#79B8FF">chart0</span><span style="color:#B392F0">.getIndicator(</span><span style="color:#FFAB70">"TX_lj7216mu_vq6_0-Chart_0-EMA_1"</span><span style="color:#B392F0">).invokeSettings(callback)</span></span></code></pre>
<p>Setting <code dir="auto">own: true</code> will cause the default dialogue not to be invoked.</p>
<p>Alternatively, if in the initial chart configuration, the <code dir="auto">config.callbacks.indicatorSettings</code> is given a callback object, this will make the change permanent.</p>
<h2 id="how-the-indicator-updates">How the Indicator Updates</h2>
<p>Initial data is passed to the indicator via the <a href="../state">Chart State</a>. It can also be <a href="../state#merging-data-into-the-state">added later (updated)</a> via the API which handles the Chart State.
<a href="../streaming_price_data">Streaming data (OHLCV)</a> can also be fed to the custom indicator.
If you take a look at the example in the repo <code dir="auto">./custom-indicator.js</code>  you will see the following methods:</p>
<ul>
<li><code dir="auto">updateValue()</code> - accepts the streaming data <code dir="auto">{Array.&#x3C;number>} candle - [timestamp, open, high, low, close, volume]</code></li>
<li><code dir="auto">calcIndicator()</code> - accepts the Range <code dir="auto">range=this.range</code></li>
<li><code dir="auto">legendInputs()</code> - accepts cursor pos on chart which is automatically passed to it by the chart</li>
<li><code dir="auto">draw()</code> - accepts the Range <code dir="auto">range=this.range</code></li>
</ul>
<p>These are the four main methods of your custom indicator, which extends the default indicator class.</p>
<p>If you examine the demo test page ./index.js and examine the function <code dir="auto">kline_Binance()</code> you will see that the data stream is passed to the chart via <code dir="auto">mergeData()</code>. The chart distributes this value to all indicators active on the chart via their <code dir="auto">updateValue()</code> method, which is why this method is required for your own custom indicator.</p>
<p>Any<code dir="auto"> mergeData()</code> call, whether for a block of back history or a single streaming candle, will automatically invoke each indicator’s <code dir="auto">calcIndicator()</code>, which is why it is also a requirement for your own custom indicators.</p>
<p><code dir="auto">draw()</code> is also automatically invoked on all indicators, including custom indicators if there is any chart event that triggers the chart to update and redraw. This too must be provided by your custom indicator. </p>
<h2 id="indicator-calculation">Indicator Calculation</h2>
<p>Of course the <a href="indicators_talib">functions provided by the TA-Lib</a> can be leveraged for custom indicators via the chart API. The chart will take care of initializing the TA-Lib wasm component and return a promise.</p>
<p>Firstly your indicator needs to import the <code dir="auto">talibAPI</code> that the chart exports. Doing so provides you with all of the talib function definitions which tell you what inputs the function requires and what output it will return.</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#B392F0"> { talibAPI } </span><span style="color:#F97583">from</span><span style="color:#FFAB70"> "../definitions/talib-api"</span><span style="color:#B392F0">;</span></span></code></pre>
<p>You can also import only the required definitions for the functions you want to work with.</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#B392F0"> { AROON } </span><span style="color:#F97583">from</span><span style="color:#FFAB70"> "../definitions/talib-api"</span><span style="color:#B392F0">;</span></span></code></pre>
<p>All indicators relying upon TA-Lib functions should defer any data processing until the promise is fulfilled.</p>
<pre class="astro-code min-dark" style="background-color:#1f1f1f;color:#b392f0; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#F97583">      if</span><span style="color:#B392F0"> (</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">core</span><span style="color:#B392F0">.TALibReady) calc()</span></span>
<span class="line"><span style="color:#F97583">      else</span><span style="color:#79B8FF">  this</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">core</span><span style="color:#B392F0">.</span><span style="color:#79B8FF">talibAwait</span><span style="color:#B392F0">.push(</span><span style="color:#79B8FF">calc</span><span style="color:#B392F0">.bind(</span><span style="color:#79B8FF">this</span><span style="color:#B392F0">))</span></span></code></pre></div><footer class="astro-3yyafb3n"><div class="meta sl-flex astro-3yyafb3n"></div><div class="pagination-links sl-flex astro-u2l5gyhi" dir="ltr"><a href="/TradeX-chart/reference/indicators/" rel="prev" class="astro-u2l5gyhi"><svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg><span class="astro-u2l5gyhi">Previous<br class="astro-u2l5gyhi"><span class="link-title astro-u2l5gyhi">Indicators</span></span></a><a href="/TradeX-chart/reference/indicators_default/" rel="next" class="astro-u2l5gyhi"><svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg><span class="astro-u2l5gyhi">Next<br class="astro-u2l5gyhi"><span class="link-title astro-u2l5gyhi">Default Indicators</span></span></a></div></footer></div></div></main></div></div></div></div></body></html>